<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD iBatis Mapper 3.0 //EN" 
	"http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">

<mapper namespace="com.mandala.visitRecord.entity.PvRecord">

	<!-- Result Map-->
	<resultMap id="PvRecord" type="com.mandala.visitRecord.entity.PvRecord" >
		<result column="RECORD_EXTEND_2" property="recordExtend2" jdbcType="VARCHAR"/>
		<result column="RECORD_EXTEND_1" property="recordExtend1" jdbcType="VARCHAR"/>
		<result column="TEMPLATE_VIEW_ID" property="templateViewId" jdbcType="VARCHAR"/>
		<result column="MEDIC_ID" property="medicId" jdbcType="VARCHAR"/>
		<result column="MEDIC_NAME" property="medicName" jdbcType="VARCHAR"/>
		<result column="MEDIC_PHONE" property="medicPhone" jdbcType="VARCHAR"/>
		<result column="UPDATE_USER_NAME" property="updateUserName" jdbcType="VARCHAR"/>
		<result column="UPDATE_USER_ID" property="updateUserId" jdbcType="VARCHAR"/>
		<result column="UPDATE_TIME" property="updateTime" jdbcType="TIMESTAMP"/>
		<result column="CREATE_USER_NAME" property="createUserName" jdbcType="VARCHAR"/>
		<result column="CREATE_USER_ID" property="createUserId" jdbcType="VARCHAR"/>
		<result column="CREATE_TIME" property="createTime" jdbcType="TIMESTAMP"/>
		<result column="SUBJECT_NAME" property="subjectName" jdbcType="VARCHAR"/>
		<result column="STOP_REASON" property="stopReason" jdbcType="VARCHAR"/>
		<result column="RECORD_CONTENT" property="recordContent" jdbcType="VARCHAR"/>
		<result column="SUB_TEMPLATE_NAME" property="subTemplateName" jdbcType="VARCHAR"/>
		<result column="CANCEL_REMINDER" property="cancelReminder" jdbcType="VARCHAR"/>
		<result column="ACTUAL_VISIT_DATE" property="actualVisitDate" jdbcType="TIMESTAMP"/>
		<result column="END_VISIT_DATE" property="endVisitDate" jdbcType="TIMESTAMP"/>
		<result column="BEGIN_VISIT_DATE" property="beginVisitDate" jdbcType="TIMESTAMP"/>
		<result column="MUST_VISIT_DATE" property="mustVisitDate" jdbcType="TIMESTAMP"/>
		<result column="VISIT_ORDER" property="visitOrder" jdbcType="INTEGER"/>
		<result column="VISIT_STATUS" property="visitStatus" jdbcType="VARCHAR"/>
		<result column="VISIT_MODE" property="visitMode" jdbcType="VARCHAR"/>
		<result column="VISIT_TYPE" property="visitType" jdbcType="VARCHAR"/>
		<result column="PATIENT_LINKTEL" property="patientLinktel" jdbcType="VARCHAR"/>
		<result column="PATIENT_LINKMAN" property="patientLinkman" jdbcType="VARCHAR"/>
		<result column="PATIENT_MAIN_DOCTOR" property="patientMainDoctor" jdbcType="VARCHAR"/>
		<result column="PATIENT_CARDID" property="patientCardid" jdbcType="VARCHAR"/>
		<result column="PATIENT_OUTDATE" property="patientOutdate" jdbcType="TIMESTAMP"/>
		<result column="PATIENT_INDATE" property="patientIndate" jdbcType="TIMESTAMP"/>
		<result column="PATIENT_OUT_DIAGNOSE" property="patientOutDiagnose" jdbcType="VARCHAR"/>
		<result column="PATIENT_IN_DIAGNOSE" property="patientInDiagnose" jdbcType="VARCHAR"/>
		<result column="PATIENT_OFFICE" property="patientOffice" jdbcType="VARCHAR"/>
		<result column="PATIENT_ADDRESS" property="patientAddress" jdbcType="VARCHAR"/>
		<result column="PATIENT_BIRTHDAY" property="patientBirthday" jdbcType="TIMESTAMP"/>
		<result column="PATIENT_MARRIAGE" property="patientMarriage" jdbcType="VARCHAR"/>
		<result column="PATIENT_SEX" property="patientSex" jdbcType="VARCHAR"/>
		<result column="PATIENT_NAME" property="patientName" jdbcType="VARCHAR"/>
		<result column="PATIENT_ID" property="patientId" jdbcType="VARCHAR"/>
		<result column="RID" property="rid" jdbcType="VARCHAR"/>
	</resultMap>
	
	<!-- 查询条件 -->
	<sql id="wherecontation">
		<trim  suffixOverrides="," >
				 <if test="query.recordExtend2 != null and query.recordExtend2 != ''" >
	  		 		/* 备用字段2 */
			    	AND RECORD_EXTEND_2 =  #{query.recordExtend2,jdbcType=VARCHAR}
				 </if>
				 <if test="query.recordExtend1 != null and query.recordExtend1 != ''" >
	  		 		/* 备用字段1 */
			    	AND RECORD_EXTEND_1 =  #{query.recordExtend1,jdbcType=VARCHAR}
				 </if>
				 <if test="query.templateViewId != null and query.templateViewId != ''" >
	  		 		/* 模板ID */
			    	AND TEMPLATE_VIEW_ID =  #{query.templateViewId,jdbcType=VARCHAR}
				 </if>
				 <if test="query.medicId != null and query.medicId != ''" >
	  		 		/* 医生ID */
			    	AND MEDIC_ID =  #{query.medicId,jdbcType=VARCHAR}
				 </if>
				 <if test="query.medicName != null and query.medicName != ''" >
	  		 		/* 医生姓名 */
			    	AND MEDIC_NAME =  #{query.medicName,jdbcType=VARCHAR}
				 </if>
				 <if test="query.medicPhone != null and query.medicPhone != ''" >
	  		 		/* 医生电话 */
			    	AND MEDIC_PHONE =  #{query.medicPhone,jdbcType=VARCHAR}
				 </if>
				 <if test="query.updateUserName != null and query.updateUserName != ''" >
	  		 		/* 更新者姓名 */
			    	AND UPDATE_USER_NAME =  #{query.updateUserName,jdbcType=VARCHAR}
				 </if>
				 <if test="query.updateUserId != null and query.updateUserId != ''" >
	  		 		/* 更新者ID */
			    	AND UPDATE_USER_ID =  #{query.updateUserId,jdbcType=VARCHAR}
				 </if>
				 <if test="query.updateTime != null and query.updateTime != ''" >
	  		 		/* 更新时间 */
			    	AND UPDATE_TIME =  #{query.updateTime,jdbcType=TIMESTAMP}
				 </if>
				 <if test="query.createUserName != null and query.createUserName != ''" >
	  		 		/* 创建者姓名 */
			    	AND CREATE_USER_NAME =  #{query.createUserName,jdbcType=VARCHAR}
				 </if>
				 <if test="query.createUserId != null and query.createUserId != ''" >
	  		 		/* 创建者ID */
			    	AND CREATE_USER_ID =  #{query.createUserId,jdbcType=VARCHAR}
				 </if>
				 <if test="query.createTime != null and query.createTime != ''" >
	  		 		/* 创建时间 */
			    	AND CREATE_TIME =  #{query.createTime,jdbcType=TIMESTAMP}
				 </if>
				 <if test="query.subjectName != null and query.subjectName != ''" >
	  		 		/* 科研随访课题名称 */
			    	AND SUBJECT_NAME =  #{query.subjectName,jdbcType=VARCHAR}
				 </if>
				 <if test="query.stopReason != null and query.stopReason != ''" >
	  		 		/* 终止随访理由 */
			    	AND STOP_REASON =  #{query.stopReason,jdbcType=VARCHAR}
				 </if>
				 <if test="query.recordContent != null and query.recordContent != ''" >
	  		 		/* 随访表单内容 */
			    	AND RECORD_CONTENT =  #{query.recordContent,jdbcType=VARCHAR}
				 </if>
				 <if test="query.subTemplateName != null and query.subTemplateName != ''" >
	  		 		/* 随访模板名称 */
			    	AND SUB_TEMPLATE_NAME =  #{query.subTemplateName,jdbcType=VARCHAR}
				 </if>
				 <if test="query.cancelReminder != null and query.cancelReminder != ''" >
	  		 		/* 取消随访提醒 */
			    	AND CANCEL_REMINDER =  #{query.cancelReminder,jdbcType=VARCHAR}
				 </if>
				 <if test="query.actualVisitDate != null and query.actualVisitDate != ''" >
	  		 		/* 实际随访日期 */
			    	AND ACTUAL_VISIT_DATE =  #{query.actualVisitDate,jdbcType=TIMESTAMP}
				 </if>
				 <if test="query.endVisitDate != null and query.endVisitDate != ''" >
	  		 		/* 随访结束日期 */
			    	AND   #{query.endVisitDate,jdbcType=TIMESTAMP} >=  MUST_VISIT_DATE
				 </if>
				 <if test="query.beginVisitDate != null and query.beginVisitDate != ''" >
	  		 		/* 随访开始日期 */
			    	AND MUST_VISIT_DATE >=  #{query.beginVisitDate,jdbcType=TIMESTAMP}
				 </if>
				 <if test="query.mustVisitDate != null and query.mustVisitDate != ''" >
	  		 		/* 随访日期 */
			    	AND MUST_VISIT_DATE =  #{query.mustVisitDate,jdbcType=TIMESTAMP}
				 </if>
				 <if test="query.visitOrder != null and query.visitOrder != ''" >
	  		 		/* 随访序数 */
			    	AND VISIT_ORDER =  #{query.visitOrder,jdbcType=INTEGER}
				 </if>
				 <if test="query.visitStatus != null and query.visitStatus != ''" >
	  		 		/* 随访状态 */
			    	AND VISIT_STATUS =  #{query.visitStatus,jdbcType=VARCHAR}
				 </if>
				 <if test="query.visitMode != null and query.visitMode != ''" >
	  		 		/* 随访方式（暂未启用） */
			    	AND VISIT_MODE =  #{query.visitMode,jdbcType=VARCHAR}
				 </if>
				 <if test="query.visitType != null and query.visitType != ''" >
	  		 		/* 随访类型（暂未启用） */
			    	AND VISIT_TYPE =  #{query.visitType,jdbcType=VARCHAR}
				 </if>
				 <if test="query.patientLinktel != null and query.patientLinktel != ''" >
	  		 		/* 病人联系电话 */
			    	AND PATIENT_LINKTEL =  #{query.patientLinktel,jdbcType=VARCHAR}
				 </if>
				 <if test="query.patientLinkman != null and query.patientLinkman != ''" >
	  		 		/* 病人联系人 */
			    	AND PATIENT_LINKMAN =  #{query.patientLinkman,jdbcType=VARCHAR}
				 </if>
				 <if test="query.patientMainDoctor != null and query.patientMainDoctor != ''" >
	  		 		/* 主治医师 */
			    	AND PATIENT_MAIN_DOCTOR =  #{query.patientMainDoctor,jdbcType=VARCHAR}
				 </if>
				 <if test="query.patientCardid != null and query.patientCardid != ''" >
	  		 		/* 病人身份证 */
			    	AND PATIENT_CARDID =  #{query.patientCardid,jdbcType=VARCHAR}
				 </if>
				 <if test="query.patientOutdate != null and query.patientOutdate != ''" >
	  		 		/* 病人出院日 */
			    	AND PATIENT_OUTDATE =  #{query.patientOutdate,jdbcType=TIMESTAMP}
				 </if>
				 <if test="query.patientIndate != null and query.patientIndate != ''" >
	  		 		/* 病人入院日 */
			    	AND PATIENT_INDATE =  #{query.patientIndate,jdbcType=TIMESTAMP}
				 </if>
				 <if test="query.patientOutDiagnose != null and query.patientOutDiagnose != ''" >
	  		 		/* 病人出院诊断 */
			    	AND PATIENT_OUT_DIAGNOSE =  #{query.patientOutDiagnose,jdbcType=VARCHAR}
				 </if>
				 <if test="query.patientInDiagnose != null and query.patientInDiagnose != ''" >
	  		 		/* 病人入院诊断 */
			    	AND PATIENT_IN_DIAGNOSE =  #{query.patientInDiagnose,jdbcType=VARCHAR}
				 </if>
				 <if test="query.patientOffice != null and query.patientOffice != ''" >
	  		 		/* 病人科室 */
			    	AND PATIENT_OFFICE =  #{query.patientOffice,jdbcType=VARCHAR}
				 </if>
				 <if test="query.patientAddress != null and query.patientAddress != ''" >
	  		 		/* 病人住址 */
			    	AND PATIENT_ADDRESS =  #{query.patientAddress,jdbcType=VARCHAR}
				 </if>
				 <if test="query.patientBirthday != null and query.patientBirthday != ''" >
	  		 		/* 病人生日 */
			    	AND PATIENT_BIRTHDAY =  #{query.patientBirthday,jdbcType=TIMESTAMP}
				 </if>
				 <if test="query.patientMarriage != null and query.patientMarriage != ''" >
	  		 		/* 病人婚姻 */
			    	AND PATIENT_MARRIAGE =  #{query.patientMarriage,jdbcType=VARCHAR}
				 </if>
				 <if test="query.patientSex != null and query.patientSex != ''" >
	  		 		/* 病人性别 */
			    	AND PATIENT_SEX =  #{query.patientSex,jdbcType=VARCHAR}
				 </if>
				 <if test="query.patientName != null and query.patientName != ''" >
	  		 		/* 病人姓名 */
			    	AND PATIENT_NAME =  #{query.patientName,jdbcType=VARCHAR}
				 </if>
				 <if test="query.patientId != null and query.patientId != ''" >
	  		 		/* 病人住院号 */
			    	AND PATIENT_ID =  #{query.patientId,jdbcType=VARCHAR}
				 </if>
				 <if test="query.rid != null and query.rid != ''" >
	  		 		/* 主键 */
			    	AND RID =  #{query.rid,jdbcType=VARCHAR}
				 </if>
		</trim>
	</sql>


<sql id="wherecontationtodo">
		<trim  suffixOverrides="," >
				 <if test="query.recordExtend2 != null and query.recordExtend2 != ''" >
	  		 		/* 备用字段2 */
			    	AND RECORD_EXTEND_2 =  #{query.recordExtend2,jdbcType=VARCHAR}
				 </if>
				 <if test="query.recordExtend1 != null and query.recordExtend1 != ''" >
	  		 		/* 备用字段1 */
			    	AND RECORD_EXTEND_1 =  #{query.recordExtend1,jdbcType=VARCHAR}
				 </if>
				 <if test="query.templateViewId != null and query.templateViewId != ''" >
	  		 		/* 模板ID */
			    	AND TEMPLATE_VIEW_ID =  #{query.templateViewId,jdbcType=VARCHAR}
				 </if>
				 <if test="query.medicId != null and query.medicId != ''" >
	  		 		/* 医生ID */
			    	AND MEDIC_ID =  #{query.medicId,jdbcType=VARCHAR}
				 </if>
				 <if test="query.medicName != null and query.medicName != ''" >
	  		 		/* 医生姓名 */
			    	AND MEDIC_NAME =  #{query.medicName,jdbcType=VARCHAR}
				 </if>
				 <if test="query.medicPhone != null and query.medicPhone != ''" >
	  		 		/* 医生电话 */
			    	AND MEDIC_PHONE =  #{query.medicPhone,jdbcType=VARCHAR}
				 </if>
				 <if test="query.updateUserName != null and query.updateUserName != ''" >
	  		 		/* 更新者姓名 */
			    	AND UPDATE_USER_NAME =  #{query.updateUserName,jdbcType=VARCHAR}
				 </if>
				 <if test="query.updateUserId != null and query.updateUserId != ''" >
	  		 		/* 更新者ID */
			    	AND UPDATE_USER_ID =  #{query.updateUserId,jdbcType=VARCHAR}
				 </if>
				 <if test="query.updateTime != null and query.updateTime != ''" >
	  		 		/* 更新时间 */
			    	AND UPDATE_TIME =  #{query.updateTime,jdbcType=TIMESTAMP}
				 </if>
				 <if test="query.createUserName != null and query.createUserName != ''" >
	  		 		/* 创建者姓名 */
			    	AND CREATE_USER_NAME =  #{query.createUserName,jdbcType=VARCHAR}
				 </if>
				 <if test="query.createUserId != null and query.createUserId != ''" >
	  		 		/* 创建者ID */
			    	AND CREATE_USER_ID =  #{query.createUserId,jdbcType=VARCHAR}
				 </if>
				 <if test="query.createTime != null and query.createTime != ''" >
	  		 		/* 创建时间 */
			    	AND CREATE_TIME =  #{query.createTime,jdbcType=TIMESTAMP}
				 </if>
				 <if test="query.subjectName != null and query.subjectName != ''" >
	  		 		/* 科研随访课题名称 */
			    	AND SUBJECT_NAME =  #{query.subjectName,jdbcType=VARCHAR}
				 </if>
				 <if test="query.stopReason != null and query.stopReason != ''" >
	  		 		/* 终止随访理由 */
			    	AND STOP_REASON =  #{query.stopReason,jdbcType=VARCHAR}
				 </if>
				 <if test="query.recordContent != null and query.recordContent != ''" >
	  		 		/* 随访表单内容 */
			    	AND RECORD_CONTENT =  #{query.recordContent,jdbcType=VARCHAR}
				 </if>
				 <if test="query.subTemplateName != null and query.subTemplateName != ''" >
	  		 		/* 随访模板名称 */
			    	AND SUB_TEMPLATE_NAME =  #{query.subTemplateName,jdbcType=VARCHAR}
				 </if>
				 <if test="query.cancelReminder != null and query.cancelReminder != ''" >
	  		 		/* 取消随访提醒 */
			    	AND CANCEL_REMINDER =  #{query.cancelReminder,jdbcType=VARCHAR}
				 </if>
				 <if test="query.actualVisitDate != null and query.actualVisitDate != ''" >
	  		 		/* 实际随访日期 */
			    	AND ACTUAL_VISIT_DATE =  #{query.actualVisitDate,jdbcType=TIMESTAMP}
				 </if>
				 <if test="query.endVisitDate != null and query.endVisitDate != ''" >
	  		 		/* 随访结束日期 */
			    	AND   #{query.endVisitDate,jdbcType=TIMESTAMP} >=  MUST_VISIT_DATE
				 </if>
				 <if test="query.beginVisitDate != null and query.beginVisitDate != ''" >
	  		 		/* 随访开始日期 */
			    	AND MUST_VISIT_DATE >=  #{query.beginVisitDate,jdbcType=TIMESTAMP}
				 </if>
				 <if test="query.mustVisitDate != null and query.mustVisitDate != ''" >
	  		 		/* 随访日期 */
			    	AND MUST_VISIT_DATE =  #{query.mustVisitDate,jdbcType=TIMESTAMP}
				 </if>
				 <if test="query.visitOrder != null and query.visitOrder != ''" >
	  		 		/* 随访序数 */
			    	AND VISIT_ORDER =  #{query.visitOrder,jdbcType=INTEGER}
				 </if>
				 <if test="query.visitMode != null and query.visitMode != ''" >
	  		 		/* 随访方式（暂未启用） */
			    	AND VISIT_MODE =  #{query.visitMode,jdbcType=VARCHAR}
				 </if>
				 <if test="query.visitType != null and query.visitType != ''" >
	  		 		/* 随访类型（暂未启用） */
			    	AND VISIT_TYPE =  #{query.visitType,jdbcType=VARCHAR}
				 </if>
				 <if test="query.patientLinktel != null and query.patientLinktel != ''" >
	  		 		/* 病人联系电话 */
			    	AND PATIENT_LINKTEL =  #{query.patientLinktel,jdbcType=VARCHAR}
				 </if>
				 <if test="query.patientLinkman != null and query.patientLinkman != ''" >
	  		 		/* 病人联系人 */
			    	AND PATIENT_LINKMAN =  #{query.patientLinkman,jdbcType=VARCHAR}
				 </if>
				 <if test="query.patientMainDoctor != null and query.patientMainDoctor != ''" >
	  		 		/* 主治医师 */
			    	AND PATIENT_MAIN_DOCTOR =  #{query.patientMainDoctor,jdbcType=VARCHAR}
				 </if>
				 <if test="query.patientCardid != null and query.patientCardid != ''" >
	  		 		/* 病人身份证 */
			    	AND PATIENT_CARDID =  #{query.patientCardid,jdbcType=VARCHAR}
				 </if>
				 <if test="query.patientOutdate != null and query.patientOutdate != ''" >
	  		 		/* 病人出院日 */
			    	AND PATIENT_OUTDATE =  #{query.patientOutdate,jdbcType=TIMESTAMP}
				 </if>
				 <if test="query.patientIndate != null and query.patientIndate != ''" >
	  		 		/* 病人入院日 */
			    	AND PATIENT_INDATE =  #{query.patientIndate,jdbcType=TIMESTAMP}
				 </if>
				 <if test="query.patientOutDiagnose != null and query.patientOutDiagnose != ''" >
	  		 		/* 病人出院诊断 */
			    	AND PATIENT_OUT_DIAGNOSE =  #{query.patientOutDiagnose,jdbcType=VARCHAR}
				 </if>
				 <if test="query.patientInDiagnose != null and query.patientInDiagnose != ''" >
	  		 		/* 病人入院诊断 */
			    	AND PATIENT_IN_DIAGNOSE =  #{query.patientInDiagnose,jdbcType=VARCHAR}
				 </if>
				 <if test="query.patientOffice != null and query.patientOffice != ''" >
	  		 		/* 病人科室 */
			    	AND PATIENT_OFFICE =  #{query.patientOffice,jdbcType=VARCHAR}
				 </if>
				 <if test="query.patientAddress != null and query.patientAddress != ''" >
	  		 		/* 病人住址 */
			    	AND PATIENT_ADDRESS =  #{query.patientAddress,jdbcType=VARCHAR}
				 </if>
				 <if test="query.patientBirthday != null and query.patientBirthday != ''" >
	  		 		/* 病人生日 */
			    	AND PATIENT_BIRTHDAY =  #{query.patientBirthday,jdbcType=TIMESTAMP}
				 </if>
				 <if test="query.patientMarriage != null and query.patientMarriage != ''" >
	  		 		/* 病人婚姻 */
			    	AND PATIENT_MARRIAGE =  #{query.patientMarriage,jdbcType=VARCHAR}
				 </if>
				 <if test="query.patientSex != null and query.patientSex != ''" >
	  		 		/* 病人性别 */
			    	AND PATIENT_SEX =  #{query.patientSex,jdbcType=VARCHAR}
				 </if>
				 <if test="query.patientName != null and query.patientName != ''" >
	  		 		/* 病人姓名 */
			    	AND PATIENT_NAME =  #{query.patientName,jdbcType=VARCHAR}
				 </if>
				 <if test="query.patientId != null and query.patientId != ''" >
	  		 		/* 病人住院号 */
			    	AND PATIENT_ID =  #{query.patientId,jdbcType=VARCHAR}
				 </if>
				 <if test="query.rid != null and query.rid != ''" >
	  		 		/* 主键 */
			    	AND RID =  #{query.rid,jdbcType=VARCHAR}
				 </if>
		</trim>
	</sql>

	<!--
	方法名称: insert
	调用路径: com.mandala.visitRecord.entity.PvRecord.insert
	开发信息: 
	处理信息: 保存信息
	-->
	<insert id="insert" parameterType="Object" keyProperty="RID" useGeneratedKeys="true">
	  INSERT  INTO  PV_RECORD   /*  */  
					(	
                      RECORD_EXTEND_2               /* 备用字段2 */ 
                     ,RECORD_EXTEND_1               /* 备用字段1 */ 
                     ,TEMPLATE_VIEW_ID              /* 模板ID */ 
                     ,MEDIC_ID                      /* 医生ID */ 
                     ,MEDIC_NAME                    /* 医生姓名 */ 
                     ,MEDIC_PHONE                   /* 医生电话 */ 
                     ,UPDATE_USER_NAME              /* 更新者姓名 */ 
                     ,UPDATE_USER_ID                /* 更新者ID */ 
                     ,UPDATE_TIME                   /* 更新时间 */ 
                     ,CREATE_USER_NAME              /* 创建者姓名 */ 
                     ,CREATE_USER_ID                /* 创建者ID */ 
                     ,CREATE_TIME                   /* 创建时间 */ 
                     ,SUBJECT_NAME                  /* 科研随访课题名称 */ 
                     ,STOP_REASON                   /* 终止随访理由 */ 
                     ,RECORD_CONTENT                /* 随访表单内容 */ 
                     ,SUB_TEMPLATE_NAME             /* 随访模板名称 */ 
                     ,CANCEL_REMINDER               /* 取消随访提醒 */ 
                     ,ACTUAL_VISIT_DATE             /* 实际随访日期 */ 
                     ,END_VISIT_DATE                /* 随访结束日期 */ 
                     ,BEGIN_VISIT_DATE              /* 随访开始日期 */ 
                     ,MUST_VISIT_DATE               /* 随访日期 */ 
                     ,VISIT_ORDER                   /* 随访序数 */ 
                     ,VISIT_STATUS                  /* 随访状态 */ 
                     ,VISIT_MODE                    /* 随访方式（暂未启用） */ 
                     ,VISIT_TYPE                    /* 随访类型（暂未启用） */ 
                     ,PATIENT_LINKTEL               /* 病人联系电话 */ 
                     ,PATIENT_LINKMAN               /* 病人联系人 */ 
                     ,PATIENT_MAIN_DOCTOR           /* 主治医师 */ 
                     ,PATIENT_CARDID                /* 病人身份证 */ 
                     ,PATIENT_OUTDATE               /* 病人出院日 */ 
                     ,PATIENT_INDATE                /* 病人入院日 */ 
                     ,PATIENT_OUT_DIAGNOSE          /* 病人出院诊断 */ 
                     ,PATIENT_IN_DIAGNOSE           /* 病人入院诊断 */ 
                     ,PATIENT_OFFICE                /* 病人科室 */ 
                     ,PATIENT_ADDRESS               /* 病人住址 */ 
                     ,PATIENT_BIRTHDAY              /* 病人生日 */ 
                     ,PATIENT_MARRIAGE              /* 病人婚姻 */ 
                     ,PATIENT_SEX                   /* 病人性别 */ 
                     ,PATIENT_NAME                  /* 病人姓名 */ 
                     ,PATIENT_ID                    /* 病人住院号 */ 
                     ,RID                           /* 主键 */ 
					)
			values (
                      #{recordExtend2,jdbcType=VARCHAR}                 /* 备用字段2 */ 
                     ,#{recordExtend1,jdbcType=VARCHAR}                 /* 备用字段1 */ 
                     ,#{templateViewId,jdbcType=VARCHAR}                /* 模板ID */ 
                     ,#{medicId,jdbcType=VARCHAR}                       /* 医生ID */ 
                     ,#{medicName,jdbcType=VARCHAR}                     /* 医生姓名 */ 
                     ,#{medicPhone,jdbcType=VARCHAR}                    /* 医生电话 */ 
                     ,#{updateUserName,jdbcType=VARCHAR}                /* 更新者姓名 */ 
                     ,#{updateUserId,jdbcType=VARCHAR}                  /* 更新者ID */ 
                     ,#{updateTime,jdbcType=TIMESTAMP}                    /* 更新时间 */ 
                     ,#{createUserName,jdbcType=VARCHAR}                /* 创建者姓名 */ 
                     ,#{createUserId,jdbcType=VARCHAR}                  /* 创建者ID */ 
                     ,#{createTime,jdbcType=TIMESTAMP}                    /* 创建时间 */ 
                     ,#{subjectName,jdbcType=VARCHAR}                   /* 科研随访课题名称 */ 
                     ,#{stopReason,jdbcType=VARCHAR}                    /* 终止随访理由 */ 
                     ,#{recordContent,jdbcType=VARCHAR}                 /* 随访表单内容 */ 
                     ,#{subTemplateName,jdbcType=VARCHAR}               /* 随访模板名称 */ 
                     ,#{cancelReminder,jdbcType=VARCHAR}                /* 取消随访提醒 */ 
                     ,#{actualVisitDate,jdbcType=TIMESTAMP}               /* 实际随访日期 */ 
                     ,#{endVisitDate,jdbcType=TIMESTAMP}                  /* 随访结束日期 */ 
                     ,#{beginVisitDate,jdbcType=TIMESTAMP}                /* 随访开始日期 */ 
                     ,#{mustVisitDate,jdbcType=TIMESTAMP}                 /* 随访日期 */ 
                     ,#{visitOrder,jdbcType=INTEGER}                    /* 随访序数 */ 
                     ,#{visitStatus,jdbcType=VARCHAR}                   /* 随访状态 */ 
                     ,#{visitMode,jdbcType=VARCHAR}                     /* 随访方式（暂未启用） */ 
                     ,#{visitType,jdbcType=VARCHAR}                     /* 随访类型（暂未启用） */ 
                     ,#{patientLinktel,jdbcType=VARCHAR}                /* 病人联系电话 */ 
                     ,#{patientLinkman,jdbcType=VARCHAR}                /* 病人联系人 */ 
                     ,#{patientMainDoctor,jdbcType=VARCHAR}             /* 主治医师 */ 
                     ,#{patientCardid,jdbcType=VARCHAR}                 /* 病人身份证 */ 
                     ,#{patientOutdate,jdbcType=TIMESTAMP}                /* 病人出院日 */ 
                     ,#{patientIndate,jdbcType=TIMESTAMP}                 /* 病人入院日 */ 
                     ,#{patientOutDiagnose,jdbcType=VARCHAR}            /* 病人出院诊断 */ 
                     ,#{patientInDiagnose,jdbcType=VARCHAR}             /* 病人入院诊断 */ 
                     ,#{patientOffice,jdbcType=VARCHAR}                 /* 病人科室 */ 
                     ,#{patientAddress,jdbcType=VARCHAR}                /* 病人住址 */ 
                     ,#{patientBirthday,jdbcType=TIMESTAMP}               /* 病人生日 */ 
                     ,#{patientMarriage,jdbcType=VARCHAR}               /* 病人婚姻 */ 
                     ,#{patientSex,jdbcType=VARCHAR}                    /* 病人性别 */ 
                     ,#{patientName,jdbcType=VARCHAR}                   /* 病人姓名 */ 
                     ,#{patientId,jdbcType=VARCHAR}                     /* 病人住院号 */ 
                     ,#{rid,jdbcType=VARCHAR}                           /* 主键 */ 
					)
	</insert>

	
	<!--
	方法名称: update
	调用路径: com.mandala.visitRecord.entity.PvRecord.update
	开发信息: 
	处理信息: 修改信息
	-->  
	 <update id="update" parameterType="Object" >
	  UPDATE   PV_RECORD  	/*  */
	  			<trim   prefix="SET" suffixOverrides="," >
						 <if test="recordExtend2 != null ">
		    		 		/* 备用字段2 */ 
	    		 			RECORD_EXTEND_2 = #{recordExtend2,jdbcType=VARCHAR},
						 </if>
						 <if test="recordExtend1 != null">
		    		 		/* 备用字段1 */ 
	    		 			RECORD_EXTEND_1 = #{recordExtend1,jdbcType=VARCHAR},
						 </if>
						 <if test="templateViewId != null">
		    		 		/* 模板ID */ 
	    		 			TEMPLATE_VIEW_ID = #{templateViewId,jdbcType=VARCHAR},
						 </if>
						 <if test="medicId != null">
		    		 		/* 医生ID */ 
	    		 			MEDIC_ID = #{medicId,jdbcType=VARCHAR},
						 </if>
						 <if test="medicName != null">
		    		 		/* 医生姓名 */ 
	    		 			MEDIC_NAME = #{medicName,jdbcType=VARCHAR},
						 </if>
						 <if test="medicPhone != null">
		    		 		/* 医生电话 */ 
	    		 			MEDIC_PHONE = #{medicPhone,jdbcType=VARCHAR},
						 </if>
						 <if test="updateUserName != null">
		    		 		/* 更新者姓名 */ 
	    		 			UPDATE_USER_NAME = #{updateUserName,jdbcType=VARCHAR},
						 </if>
						 <if test="updateUserId != null">
		    		 		/* 更新者ID */ 
	    		 			UPDATE_USER_ID = #{updateUserId,jdbcType=VARCHAR},
						 </if>
						 <if test="updateTime != null">
		    		 		/* 更新时间 */ 
	    		 			UPDATE_TIME = #{updateTime,jdbcType=TIMESTAMP},
						 </if>
						 <if test="createUserName != null">
		    		 		/* 创建者姓名 */ 
	    		 			CREATE_USER_NAME = #{createUserName,jdbcType=VARCHAR},
						 </if>
						 <if test="createUserId != null">
		    		 		/* 创建者ID */ 
	    		 			CREATE_USER_ID = #{createUserId,jdbcType=VARCHAR},
						 </if>
						 <if test="createTime != null">
		    		 		/* 创建时间 */ 
	    		 			CREATE_TIME = #{createTime,jdbcType=TIMESTAMP},
						 </if>
						 <if test="subjectName != null">
		    		 		/* 科研随访课题名称 */ 
	    		 			SUBJECT_NAME = #{subjectName,jdbcType=VARCHAR},
						 </if>
						 <if test="stopReason != null  and  stopReason != ''">
		    		 		/* 终止随访理由 */ 
	    		 			STOP_REASON = #{stopReason,jdbcType=VARCHAR},
						 </if>
						 <if test="recordContent != null  and  recordContent != ''">
		    		 		/* 随访表单内容 */ 
	    		 			RECORD_CONTENT = #{recordContent,jdbcType=VARCHAR},
						 </if>
						 <if test="subTemplateName != null">
		    		 		/* 随访模板名称 */ 
	    		 			SUB_TEMPLATE_NAME = #{subTemplateName,jdbcType=VARCHAR},
						 </if>
						 <if test="cancelReminder != null">
		    		 		/* 取消随访提醒 */ 
	    		 			CANCEL_REMINDER = #{cancelReminder,jdbcType=VARCHAR},
						 </if>
						 <if test="actualVisitDate != null">
		    		 		/* 实际随访日期 */ 
	    		 			ACTUAL_VISIT_DATE = #{actualVisitDate,jdbcType=TIMESTAMP},
						 </if>
						 <if test="endVisitDate != null">
		    		 		/* 随访结束日期 */ 
	    		 			END_VISIT_DATE = #{endVisitDate,jdbcType=TIMESTAMP},
						 </if>
						 <if test="beginVisitDate != null">
		    		 		/* 随访开始日期 */ 
	    		 			BEGIN_VISIT_DATE = #{beginVisitDate,jdbcType=TIMESTAMP},
						 </if>
						 <if test="mustVisitDate != null">
		    		 		/* 随访日期 */ 
	    		 			MUST_VISIT_DATE = #{mustVisitDate,jdbcType=TIMESTAMP},
						 </if>
						 <if test="visitOrder != null">
		    		 		/* 随访序数 */ 
	    		 			VISIT_ORDER = #{visitOrder,jdbcType=INTEGER},
						 </if>
						 <if test="visitStatus != null  and  visitStatus != ''">
		    		 		/* 随访状态 */ 
	    		 			VISIT_STATUS = #{visitStatus,jdbcType=VARCHAR},
						 </if>
						 <if test="visitMode != null">
		    		 		/* 随访方式（暂未启用） */ 
	    		 			VISIT_MODE = #{visitMode,jdbcType=VARCHAR},
						 </if>
						 <if test="visitType != null">
		    		 		/* 随访类型（暂未启用） */ 
	    		 			VISIT_TYPE = #{visitType,jdbcType=VARCHAR},
						 </if>
						 <if test="patientLinktel != null">
		    		 		/* 病人联系电话 */ 
	    		 			PATIENT_LINKTEL = #{patientLinktel,jdbcType=VARCHAR},
						 </if>
						 <if test="patientLinkman != null">
		    		 		/* 病人联系人 */ 
	    		 			PATIENT_LINKMAN = #{patientLinkman,jdbcType=VARCHAR},
						 </if>
						 <if test="patientMainDoctor != null">
		    		 		/* 主治医师 */ 
	    		 			PATIENT_MAIN_DOCTOR = #{patientMainDoctor,jdbcType=VARCHAR},
						 </if>
						 <if test="patientCardid != null">
		    		 		/* 病人身份证 */ 
	    		 			PATIENT_CARDID = #{patientCardid,jdbcType=VARCHAR},
						 </if>
						 <if test="patientOutdate != null">
		    		 		/* 病人出院日 */ 
	    		 			PATIENT_OUTDATE = #{patientOutdate,jdbcType=TIMESTAMP},
						 </if>
						 <if test="patientIndate != null">
		    		 		/* 病人入院日 */ 
	    		 			PATIENT_INDATE = #{patientIndate,jdbcType=TIMESTAMP},
						 </if>
						 <if test="patientOutDiagnose != null">
		    		 		/* 病人出院诊断 */ 
	    		 			PATIENT_OUT_DIAGNOSE = #{patientOutDiagnose,jdbcType=VARCHAR},
						 </if>
						 <if test="patientInDiagnose != null">
		    		 		/* 病人入院诊断 */ 
	    		 			PATIENT_IN_DIAGNOSE = #{patientInDiagnose,jdbcType=VARCHAR},
						 </if>
						 <if test="patientOffice != null">
		    		 		/* 病人科室 */ 
	    		 			PATIENT_OFFICE = #{patientOffice,jdbcType=VARCHAR},
						 </if>
						 <if test="patientAddress != null">
		    		 		/* 病人住址 */ 
	    		 			PATIENT_ADDRESS = #{patientAddress,jdbcType=VARCHAR},
						 </if>
						 <if test="patientBirthday != null">
		    		 		/* 病人生日 */ 
	    		 			PATIENT_BIRTHDAY = #{patientBirthday,jdbcType=TIMESTAMP},
						 </if>
						 <if test="patientMarriage != null">
		    		 		/* 病人婚姻 */ 
	    		 			PATIENT_MARRIAGE = #{patientMarriage,jdbcType=VARCHAR},
						 </if>
						 <if test="patientSex != null">
		    		 		/* 病人性别 */ 
	    		 			PATIENT_SEX = #{patientSex,jdbcType=VARCHAR},
						 </if>
						 <if test="patientName != null">
		    		 		/* 病人姓名 */ 
	    		 			PATIENT_NAME = #{patientName,jdbcType=VARCHAR},
						 </if>
						 <if test="patientId != null">
		    		 		/* 病人住院号 */ 
	    		 			PATIENT_ID = #{patientId,jdbcType=VARCHAR},
						 </if> 
	  	  		</trim>
				WHERE
	  	 		 		RID = #{rid}		/* 序号 */ 
	 </update>
	
	<!--
	方法名称: get
	调用路径: com.mandala.visitRecord.entity.PvRecord.get
	开发信息: 
	处理信息: 根据主键查询记录
	-->
	<select id="get" parameterType="Object"  resultMap="PvRecord">
		   SELECT   
                   pr.RECORD_EXTEND_2               /* 备用字段2 */ 
                  ,pr.RECORD_EXTEND_1               /* 备用字段1 */ 
                  ,PTV.TEMP_FILE_URL AS TEMPLATE_VIEW_ID              /* 模板ID */ 
                  ,pr.MEDIC_ID                      /* 医生ID */ 
                  ,pr.MEDIC_NAME                    /* 医生姓名 */ 
                  ,pr.MEDIC_PHONE                   /* 医生电话 */ 
                  ,pr.UPDATE_USER_NAME              /* 更新者姓名 */ 
                  ,pr.UPDATE_USER_ID                /* 更新者ID */ 
                  ,pr.UPDATE_TIME                   /* 更新时间 */ 
                  ,pr.CREATE_USER_NAME              /* 创建者姓名 */ 
                  ,pr.CREATE_USER_ID                /* 创建者ID */ 
                  ,pr.CREATE_TIME                   /* 创建时间 */ 
                  ,pr.SUBJECT_NAME                  /* 科研随访课题名称 */ 
                  ,pr.STOP_REASON                   /* 终止随访理由 */ 
                  ,pr.RECORD_CONTENT                /* 随访表单内容 */ 
                  ,pr.SUB_TEMPLATE_NAME             /* 随访模板名称 */ 
                  ,pr.CANCEL_REMINDER               /* 取消随访提醒 */ 
                  ,pr.ACTUAL_VISIT_DATE             /* 实际随访日期 */ 
                  ,pr.END_VISIT_DATE                /* 随访结束日期 */ 
                  ,pr.BEGIN_VISIT_DATE              /* 随访开始日期 */ 
                  ,pr.MUST_VISIT_DATE               /* 随访日期 */ 
                  ,pr.VISIT_ORDER                   /* 随访序数 */ 
                  ,pr.VISIT_STATUS                  /* 随访状态 */ 
                  ,pr.VISIT_MODE                    /* 随访方式（暂未启用） */ 
                  ,pr.VISIT_TYPE                    /* 随访类型（暂未启用） */ 
                  ,pr.PATIENT_LINKTEL               /* 病人联系电话 */ 
                  ,pr.PATIENT_LINKMAN               /* 病人联系人 */ 
                  ,pr.PATIENT_MAIN_DOCTOR           /* 主治医师 */ 
                  ,pr.PATIENT_CARDID                /* 病人身份证 */ 
                  ,pr.PATIENT_OUTDATE               /* 病人出院日 */ 
                  ,pr.PATIENT_INDATE                /* 病人入院日 */ 
                  ,pr.PATIENT_OUT_DIAGNOSE          /* 病人出院诊断 */ 
                  ,pr.PATIENT_IN_DIAGNOSE           /* 病人入院诊断 */ 
                  ,pr.PATIENT_OFFICE                /* 病人科室 */ 
                  ,pr.PATIENT_ADDRESS               /* 病人住址 */ 
                  ,pr.PATIENT_BIRTHDAY              /* 病人生日 */ 
                  ,pr.PATIENT_MARRIAGE              /* 病人婚姻 */ 
                  ,pr.PATIENT_SEX                   /* 病人性别 */ 
                  ,pr.PATIENT_NAME                  /* 病人姓名 */ 
                  ,pr.PATIENT_ID                    /* 病人住院号 */ 
                  ,pr.RID                           /* 主键 */ 
                 
		   FROM   PV_RECORD       pr     left join PV_TEMPLATE_VIEW PTV ON pr.TEMPLATE_VIEW_ID=PTV.TID /*  */ 
		   WHERE
				RID = #{rid}			/* 序号 */ 
	</select>
	
	<!--
	方法名称: delete
	调用路径: com.mandala.visitRecord.entity.PvRecord.delete
	开发信息: 
	处理信息: 删除记录
	-->
	<delete id="delete" parameterType="Object">
		DELETE 	FROM PV_RECORD 	/*  */  
		WHERE 
				RID = #{rid}					/* 序号 */ 
	</delete>
	
	<!--
	方法名称: count
	调用路径: com.mandala.visitRecord.entity.PvRecord.count
	开发信息: 
	处理信息: 列表总数
	-->
	<select id="count" resultType="java.lang.Integer"  parameterType="Object">
		SELECT count(*)  FROM  PV_RECORD    pr      /*  */ 
		 WHERE 1=1
		    <include refid="wherecontation"/>
	</select>
	
		<select id="countToDo" resultType="java.lang.Integer"  parameterType="Object">
		SELECT count(*)  FROM  PV_RECORD    pr      /*  */ 
		 WHERE 1=1
		    <include refid="wherecontationtodo"/> and VISIT_STATUS !='sf22' and VISIT_STATUS !='sf33'
	</select>
  	
  	<!--
	方法名称: queryPageList
	调用路径: com.mandala.visitRecord.entity.PvRecord.queryPageList
	开发信息: 
	处理信息: 列表
	-->
	<select id="queryPageList" parameterType="Object"  resultMap="PvRecord">
	    SELECT 
                   pr.RECORD_EXTEND_2               /* 备用字段2 */ 
                  ,pr.RECORD_EXTEND_1               /* 备用字段1 */ 
                  ,pr.TEMPLATE_VIEW_ID              /* 模板ID */ 
                  ,pr.MEDIC_ID                      /* 医生ID */ 
                  ,pr.MEDIC_NAME                    /* 医生姓名 */ 
                  ,pr.MEDIC_PHONE                   /* 医生电话 */ 
                  ,pr.UPDATE_USER_NAME              /* 更新者姓名 */ 
                  ,pr.UPDATE_USER_ID                /* 更新者ID */ 
                  ,pr.UPDATE_TIME                   /* 更新时间 */ 
                  ,pr.CREATE_USER_NAME              /* 创建者姓名 */ 
                  ,pr.CREATE_USER_ID                /* 创建者ID */ 
                  ,pr.CREATE_TIME                   /* 创建时间 */ 
                  ,pr.SUBJECT_NAME                  /* 科研随访课题名称 */ 
                  ,pr.STOP_REASON                   /* 终止随访理由 */ 
                  ,pr.RECORD_CONTENT                /* 随访表单内容 */ 
                  ,pr.SUB_TEMPLATE_NAME             /* 随访模板名称 */ 
                  ,pr.CANCEL_REMINDER               /* 取消随访提醒 */ 
                  ,pr.ACTUAL_VISIT_DATE             /* 实际随访日期 */ 
                  ,pr.END_VISIT_DATE                /* 随访结束日期 */ 
                  ,pr.BEGIN_VISIT_DATE              /* 随访开始日期 */ 
                  ,pr.MUST_VISIT_DATE               /* 随访日期 */ 
                  ,pr.VISIT_ORDER                   /* 随访序数 */ 
                  ,(select dictname from dictinfo d where pr.VISIT_STATUS = d.dictcode) as  VISIT_STATUS   /* 随访状态 */ 
                  ,pr.VISIT_MODE                    /* 随访方式（暂未启用） */ 
                  ,pr.VISIT_TYPE                    /* 随访类型（暂未启用） */ 
                  ,pr.PATIENT_LINKTEL               /* 病人联系电话 */ 
                  ,pr.PATIENT_LINKMAN               /* 病人联系人 */ 
                  ,pr.PATIENT_MAIN_DOCTOR           /* 主治医师 */ 
                  ,pr.PATIENT_CARDID                /* 病人身份证 */ 
                  ,pr.PATIENT_OUTDATE               /* 病人出院日 */ 
                  ,pr.PATIENT_INDATE                /* 病人入院日 */ 
                  ,pr.PATIENT_OUT_DIAGNOSE          /* 病人出院诊断 */ 
                  ,pr.PATIENT_IN_DIAGNOSE           /* 病人入院诊断 */ 
                  ,(select dictname from dictinfo d where pr.PATIENT_OFFICE = d.dictcode) as   PATIENT_OFFICE              /* 病人科室 */ 
                  ,pr.PATIENT_ADDRESS               /* 病人住址 */ 
                  ,pr.PATIENT_BIRTHDAY              /* 病人生日 */ 
                  ,pr.PATIENT_MARRIAGE              /* 病人婚姻 */ 
                  ,pr.PATIENT_SEX                   /* 病人性别 */ 
                  ,pr.PATIENT_NAME                  /* 病人姓名 */ 
                  ,pr.PATIENT_ID                    /* 病人住院号 */ 
                  ,pr.RID                           /* 主键 */ 
		FROM  (
SELECT A.*, ROWNUM RN 
FROM (SELECT * FROM PV_RECORD where  1=1  <include refid="wherecontation"/>  	order by MUST_VISIT_DATE asc	) A WHERE 
#{startRow}  + #{pageSize}
>= ROWNUM) pr  
WHERE pr.RN > #{startRow} 
		
			  
	</select>
	
		<select id="queryPageListToDo" parameterType="Object"  resultMap="PvRecord">
	    SELECT 
                   pr.RECORD_EXTEND_2               /* 备用字段2 */ 
                  ,pr.RECORD_EXTEND_1               /* 备用字段1 */ 
                  ,pr.TEMPLATE_VIEW_ID              /* 模板ID */ 
                  ,pr.MEDIC_ID                      /* 医生ID */ 
                  ,pr.MEDIC_NAME                    /* 医生姓名 */ 
                  ,pr.MEDIC_PHONE                   /* 医生电话 */ 
                  ,pr.UPDATE_USER_NAME              /* 更新者姓名 */ 
                  ,pr.UPDATE_USER_ID                /* 更新者ID */ 
                  ,pr.UPDATE_TIME                   /* 更新时间 */ 
                  ,pr.CREATE_USER_NAME              /* 创建者姓名 */ 
                  ,pr.CREATE_USER_ID                /* 创建者ID */ 
                  ,pr.CREATE_TIME                   /* 创建时间 */ 
                  ,pr.SUBJECT_NAME                  /* 科研随访课题名称 */ 
                  ,pr.STOP_REASON                   /* 终止随访理由 */ 
                  ,pr.RECORD_CONTENT                /* 随访表单内容 */ 
                  ,pr.SUB_TEMPLATE_NAME             /* 随访模板名称 */ 
                  ,pr.CANCEL_REMINDER               /* 取消随访提醒 */ 
                  ,pr.ACTUAL_VISIT_DATE             /* 实际随访日期 */ 
                  ,pr.END_VISIT_DATE                /* 随访结束日期 */ 
                  ,pr.BEGIN_VISIT_DATE              /* 随访开始日期 */ 
                  ,pr.MUST_VISIT_DATE               /* 随访日期 */ 
                  ,pr.VISIT_ORDER                   /* 随访序数 */ 
                  ,(select dictname from dictinfo d where pr.VISIT_STATUS = d.dictcode) as  VISIT_STATUS   /* 随访状态 */ 
                  ,pr.VISIT_MODE                    /* 随访方式（暂未启用） */ 
                  ,pr.VISIT_TYPE                    /* 随访类型（暂未启用） */ 
                  ,pr.PATIENT_LINKTEL               /* 病人联系电话 */ 
                  ,pr.PATIENT_LINKMAN               /* 病人联系人 */ 
                  ,pr.PATIENT_MAIN_DOCTOR           /* 主治医师 */ 
                  ,pr.PATIENT_CARDID                /* 病人身份证 */ 
                  ,pr.PATIENT_OUTDATE               /* 病人出院日 */ 
                  ,pr.PATIENT_INDATE                /* 病人入院日 */ 
                  ,pr.PATIENT_OUT_DIAGNOSE          /* 病人出院诊断 */ 
                  ,pr.PATIENT_IN_DIAGNOSE           /* 病人入院诊断 */ 
                  ,(select dictname from dictinfo d where pr.PATIENT_OFFICE = d.dictcode) as   PATIENT_OFFICE              /* 病人科室 */ 
                  ,pr.PATIENT_ADDRESS               /* 病人住址 */ 
                  ,pr.PATIENT_BIRTHDAY              /* 病人生日 */ 
                  ,pr.PATIENT_MARRIAGE              /* 病人婚姻 */ 
                  ,pr.PATIENT_SEX                   /* 病人性别 */ 
                  ,pr.PATIENT_NAME                  /* 病人姓名 */ 
                  ,pr.PATIENT_ID                    /* 病人住院号 */ 
                  ,pr.RID                           /* 主键 */ 
		FROM  (
SELECT A.*, ROWNUM RN 
FROM (SELECT * FROM PV_RECORD where  1=1  <include refid="wherecontationtodo"/>  and VISIT_STATUS !='sf22' and VISIT_STATUS !='sf33'  	order by MUST_VISIT_DATE asc	) A WHERE 
#{startRow}  + #{pageSize}
>= ROWNUM) pr  
WHERE pr.RN > #{startRow} 
		
			  
	</select>
	
	
</mapper>